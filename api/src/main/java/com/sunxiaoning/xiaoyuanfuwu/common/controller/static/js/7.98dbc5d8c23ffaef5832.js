webpackJsonp([7],{SuHZ:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Qnb9"),i=e("05op"),o={name:"DangerRecheck",components:{unphoto:a.a},data:function(){return{info:JSON.parse(window.localStorage.getItem("danger")),remark:"",money:null,photoUrl:"",state:1,zgmoney:null,zgname:"",zgremark:"",zgimage:"",zgtime:"",yhclId:""}},mounted:function(){console.log("本条信息",this.info),this.checkState()},methods:{checkState:function(){for(var t=this.info.history,s=0;s<this.info.history.length;s++)0==t[s].yhclzt&&(this.zgmoney=t[s].yhzgje,this.zgname=t[s].yhzgr,this.zgremark=t[s].yhzgbz,this.zgimage=t[s].yhzgzp,this.zgtime=t[s].yhzgsj,this.yhclId=t[s].yhcl_id)},saveUrl:function(t){this.photoUrl=t},saveData:function(){var t=this;if(null==this.money)return this.$showError("请填写复查金额"),!1;if(""==this.remark)return this.$showError("请填写复查备注"),!1;if(0==this.photoUrl.length)return this.$showError("请上传复查图片"),!1;this.$showDialog();var s={yhjl_id:this.info.yh_id,yhcl_id:this.yhclId,yhfcje:this.money,yhfcbz:this.remark,yhfczp:this.photoUrl,state:this.state};console.log("提交的数据",s),this.$post(i.r,s).then(function(s){t.$showDialog(!1),0==s.errno?(t.$showSuccess("保存成功"),window.history.go(-2)):t.$showError("保存失败")})},heighOn:function(){/Android/gi.test(navigator.userAgent)&&window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)})}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("yd-layout",{staticClass:"box_danger_recheck"},[e("navBar",{attrs:{slot:"navbar",title:"隐患复查"},slot:"navbar"}),t._v(" "),e("div",{staticClass:"box_contc"},[e("div",{staticClass:"box_titlec"},[t._v("整改信息")]),t._v(" "),e("div",{staticClass:"flex"},[e("span",{staticClass:"gray"},[t._v("整改金额：")]),t._v(t._s(t.zgmoney)+"元")]),t._v(" "),e("div",{staticClass:"flex"},[e("span",{staticClass:"gray"},[t._v("整改人员：")]),t._v(t._s(t.zgname))]),t._v(" "),e("div",{staticClass:"flex"},[e("span",{staticClass:"gray"},[t._v("整改时间：")]),t._v(t._s(t.zgtime))]),t._v(" "),e("div",{staticClass:"flex"},[e("span",{staticClass:"gray"},[t._v("整改备注：")]),e("div",{staticStyle:{flex:"1"}},[t._v(t._s(t.zgremark))])]),t._v(" "),e("div",{staticClass:"flex"},[e("div",{staticClass:"gray"},[t._v("整改图片：")]),t._v(" "),e("div",{staticClass:"flex_image"},[e("div",{staticClass:"flex_image_img",on:{click:function(s){t.onPressLightbox(s,t.zgimage)}}},[e("img",{attrs:{src:t.zgimage,alt:""}})])])])]),t._v(" "),e("div",{staticClass:"box_form"},[e("div",{staticClass:"box_titlec",staticStyle:{color:"orange"}},[t._v("复查信息")]),t._v(" "),e("div",{staticClass:"box_cont",staticStyle:{"align-items":"center"}},[e("p",{staticClass:"mright"},[t._v("金额：")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],staticClass:"box_input",attrs:{type:"number",placeholder:"请输入整改金额(元)"},domProps:{value:t.money},on:{focus:t.heighOn,input:function(s){s.target.composing||(t.money=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"box_cont mtop"},[e("p",{staticClass:"mright"},[t._v("备注：")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"box_txt",attrs:{rows:"5",placeholder:"请输入备注"},domProps:{value:t.remark},on:{focus:t.heighOn,input:function(s){s.target.composing||(t.remark=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"box_cont mtop"},[e("p",{staticClass:"mright"},[t._v("附件：")]),t._v(" "),e("unphoto",{on:{imagesUrl:t.saveUrl}})],1),t._v(" "),e("div",{staticClass:"box_cont mtop"},[e("p",{staticClass:"mright"},[t._v("状态：")]),t._v(" "),e("yd-radio-group",{attrs:{color:"#1D91E6"},model:{value:t.state,callback:function(s){t.state=s},expression:"state"}},[e("yd-radio",{attrs:{val:"0"}},[t._v("复查结束")]),t._v(" "),e("yd-radio",{attrs:{val:"1"}},[t._v("重新整改")])],1)],1),t._v(" "),e("yd-button",{attrs:{size:"large",color:"#fff",bgcolor:"#1D91E6"},nativeOn:{click:function(s){return t.saveData(s)}}},[t._v("保存")])],1)],1)},staticRenderFns:[]};var r=e("VU/8")(o,n,!1,function(t){e("a9Mk"),e("bmF2")},"data-v-5cf84326",null);s.default=r.exports},a9Mk:function(t,s){},bmF2:function(t,s){}});
//# sourceMappingURL=7.98dbc5d8c23ffaef5832.js.map