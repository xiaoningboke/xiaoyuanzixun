{"remainingRequest":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\babel-loader\\lib\\index.js!F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\src\\components\\unphoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\src\\components\\unphoto.vue","mtime":1553839679294},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { compressImage } from './tools';\nexport default {\n  name: 'unphoto',\n  data: function data() {\n    return {\n      imagesUrl: '',\n      //拍照上传当前图片的路径\n      isImage: false //是否展示当拍照上传按钮\n\n    };\n  },\n  mounted: function mounted() {},\n  methods: {\n    //     //点击上传图片\n    uploadPhoto: function uploadPhoto() {\n      this.$el.querySelector('.inputFile').click();\n    },\n    //展示图片\n    handleFile: function handleFile(e) {\n      var _this = this;\n\n      var $target = e.target || e.srcElement;\n      var file = $target.files[0]; //压缩图片\n\n      compressImage(file, {\n        quality: 0.2\n      }).then(function (imageData) {\n        _this.imagesUrl = imageData; // console.log('当前图片的路径',this.imagesUrl);\n\n        _this.$emit('imagesUrl', _this.imagesUrl); // 清空value (BUG:如果不清空,会导致同一张图片无法二次选择)\n\n\n        _this.$el.querySelector('.inputFile').value = '';\n      });\n      this.isImage = !this.isImage;\n    },\n    //     //大图预览\n    onPressLightbox: function onPressLightbox(e, img) {\n      var photoes = [{\n        url: img\n      }];\n      this.$showLightbox(photoes); // fancyBox(e.target, images);\n    },\n    //删除当前图片\n    delImg: function delImg() {\n      this.isImage = !this.isImage;\n      this.imagesUrl = '';\n      this.$emit('imagesUrl', this.imagesUrl);\n    }\n  }\n};",{"version":3,"sources":["unphoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,SAAA,aAAA,QAAA,SAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AACA;AACA,MAAA,OAAA,EAAA,KAFA,CAEA;;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OARA,qBAQA,CAAA,CARA;AASA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA,yBAEA;AACA,WAAA,GAAA,CAAA,aAAA,CAAA,YAAA,EAAA,KAAA;AACA,KAJA;AAKA;AACA,IAAA,UANA,sBAMA,CANA,EAMA;AAAA;;AACA,UAAA,OAAA,GAAA,CAAA,CAAA,MAAA,IAAA,CAAA,CAAA,UAAA;AACA,UAAA,IAAA,GAAA,OAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CAFA,CAGA;;AACA,MAAA,aAAA,CAAA,IAAA,EAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,SAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,SAAA,CADA,CAEA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,EAAA,KAAA,CAAA,SAAA,EAHA,CAIA;;;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,aAAA,CAAA,YAAA,EAAA,KAAA,GAAA,EAAA;AACA,OANA;AAOA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA,KAlBA;AAmBA;AACA,IAAA,eApBA,2BAoBA,CApBA,EAoBA,GApBA,EAoBA;AACA,UAAA,OAAA,GAAA,CAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OAAA,CAAA;AACA,WAAA,aAAA,CAAA,OAAA,EAFA,CAGA;AACA,KAxBA;AAyBA;AACA,IAAA,MA1BA,oBA0BA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,WAAA,EAAA,KAAA,SAAA;AACA;AA9BA;AATA,CAAA","sourcesContent":["<template>\n  <div class=\"box_light\">\n    <div class=\"box_photo\" v-if=\"isImage\">\n      <img\n        src=\"../assets/delete.png\"\n        alt=\"\"\n        class=\"box_delete\"\n        @click=\"delImg\"\n      />\n      <img\n        :src=\"imagesUrl\"\n        alt=\"\"\n        class=\"img1\"\n        @click=\"onPressLightbox($event, imagesUrl)\"\n      />\n    </div>\n    <div class=\"box_img\" @click=\"uploadPhoto\" v-if=\"!isImage\">\n      <img src=\"../assets/add.png\" alt=\"\" />\n      <div style=\"color: #d9d9d9;font-size: .26rem;\">相机</div>\n    </div>\n    <!--允许本地相册图片上传,用于浏览器测试-->\n    <input\n      type=\"file\"\n      accept=\"image/*\"\n      @change=\"handleFile\"\n      class=\"inputFile\"\n      v-show=\"false\"\n    />\n    <!--只允许手机拍照上传-->\n    <!--<input\n      type=\"file\"\n      accept=\"image/*\"\n      @change=\"handleFile\"\n      class=\"inputFile\"\n      v-show=\"false\"\n      capture=\"camera\"\n    />-->\n  </div>\n</template>\n\n<script>\nimport { compressImage } from './tools';\nexport default {\n  name: 'unphoto',\n  data() {\n    return {\n      imagesUrl: '', //拍照上传当前图片的路径\n      isImage: false //是否展示当拍照上传按钮\n    };\n  },\n  mounted() {},\n  methods: {\n    //     //点击上传图片\n    uploadPhoto() {\n      this.$el.querySelector('.inputFile').click();\n    },\n    //展示图片\n    handleFile(e) {\n      let $target = e.target || e.srcElement;\n      let file = $target.files[0];\n      //压缩图片\n      compressImage(file, { quality: 0.2 }).then(imageData => {\n        this.imagesUrl = imageData;\n        // console.log('当前图片的路径',this.imagesUrl);\n        this.$emit('imagesUrl', this.imagesUrl);\n        // 清空value (BUG:如果不清空,会导致同一张图片无法二次选择)\n        this.$el.querySelector('.inputFile').value = '';\n      });\n      this.isImage = !this.isImage;\n    },\n    //     //大图预览\n    onPressLightbox(e, img) {\n      let photoes = [{ url: img }];\n      this.$showLightbox(photoes);\n      // fancyBox(e.target, images);\n    },\n    //删除当前图片\n    delImg() {\n      this.isImage = !this.isImage;\n      this.imagesUrl = '';\n      this.$emit('imagesUrl', this.imagesUrl);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.box_light {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.box_img {\n  width: calc(95% / 3);\n  height: 1.8rem;\n  margin-right: 0.1rem;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  border: 1px solid #d9d9d9;\n  padding: 0.2rem;\n  margin-bottom: 0.1rem;\n}\n.box_img img {\n  width: 60%;\n  height: 60%;\n}\n.box_photo {\n  width: calc(93% / 3);\n  height: 1.8rem;\n  margin-right: 0.1rem;\n  margin-bottom: 0.1rem;\n  position: relative;\n}\n.box_photo .img1 {\n  width: 100%;\n  height: 100%;\n}\n.box_delete {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 35%;\n  height: 35%;\n}\n</style>\n"],"sourceRoot":"src/components"}]}