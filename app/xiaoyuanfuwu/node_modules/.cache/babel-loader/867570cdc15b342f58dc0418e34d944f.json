{"remainingRequest":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\babel-loader\\lib\\index.js!F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\src\\components\\tools\\index.js","dependencies":[{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\src\\components\\tools\\index.js","mtime":1550103376000},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"F:\\\\xiaoyuanfuwu\\\\app\\\\xiaoyuanfuwu\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\n\n// ================================= JS扩展 ================================= //\n/// 日期格式化\nDate.prototype.format = function (format) {\n  var o = {\n    'M+': this.getMonth() + 1,\n    //month\n    'd+': this.getDate(),\n    //day\n    'h+': this.getHours(),\n    //hour\n    'm+': this.getMinutes(),\n    //minute\n    's+': this.getSeconds(),\n    //second\n    'q+': Math.floor((this.getMonth() + 3) / 3),\n    //quarter\n    S: this.getMilliseconds() //millisecond\n\n  };\n  if (/(y+)/.test(format)) format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));\n\n  for (var k in o) {\n    if (new RegExp('(' + k + ')').test(format)) format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\n  }\n\n  return format;\n}; /// 判断OS体统\n\n\nvar ua = navigator.userAgent.toLowerCase() || window.navigator.userAgent.toLowerCase();\n\nglobal.isWX = function () {\n  return /MicroMessenger/i.test(ua);\n}; //微信端\n\n\nglobal.isIOS = function () {\n  return /(iPhone|iPad|iPod|iOS)/i.test(ua);\n}; //苹果家族\n\n\nglobal.isAndroid = function () {\n  return /(android|nexus)/i.test(ua);\n}; //安卓家族\n\n\nglobal.isWindows = function () {\n  return /(Windows Phone|windows[\\s+]phone)/i.test(ua);\n}; //微软家族\n\n\nglobal.isBlackBerry = function () {\n  return /BlackBerry/i.test(ua);\n}; //黑莓家族\n\n\nvar isWX = /MicroMessenger/i.test(ua); //微信端\n\nvar isIOS = /(iPhone|iPad|iPod|iOS)/i.test(ua); //苹果家族\n\nvar isAndroid = /(android|nexus)/i.test(ua); //安卓家族\n\nvar isWindows = /(Windows Phone|windows[\\s+]phone)/i.test(ua); //微软家族\n\nvar isBlackBerry = /BlackBerry/i.test(ua); //黑莓家族\n\nvar parseDate = function parseDate(date) {\n  var fmt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'yyyy-MM-dd';\n\n  if (date && date.length > 0) {\n    if (date !== '0001-01-01T00:00:00') {\n      return new Date(date).format(fmt);\n    }\n\n    return '';\n  }\n\n  return '';\n}; //压缩图片\n/// 压缩图片\n\n\nvar compressImage = function compressImage(file) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    quality: 0.5,\n    maxWidth: 320\n  };\n  if (!file) return '';\n\n  var compressImageAtPath = function compressImageAtPath(path) {\n    var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.5;\n    var callback = arguments.length > 2 ? arguments[2] : undefined;\n    var img = new Image();\n    img.src = path;\n\n    img.onload = function () {\n      var that = this; // 默认按比例压缩\n\n      var w = that.width,\n          h = that.height,\n          scale = w / h;\n      w = option.maxWidth || w;\n      h = option.maxHeight || w / scale; // var quality = 0.7;  // 默认图片质量为0.7\n      //生成canvas\n\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d'); // 创建属性节点\n\n      var anw = document.createAttribute('width');\n      anw.nodeValue = w;\n      var anh = document.createAttribute('height');\n      anh.nodeValue = h;\n      canvas.setAttributeNode(anw);\n      canvas.setAttributeNode(anh); // 绘制图片\n\n      ctx.drawImage(that, 0, 0, w, h); // 图像质量\n      // if(obj.quality && obj.quality <= 1 && obj.quality > 0){\n      //     quality = obj.quality;\n      // }\n      // quality值越小，所绘制出的图像越模糊\n\n      var base64 = canvas.toDataURL('image/jpeg', quality); // console.log('current image => ', base64.length);\n\n      callback(base64);\n    };\n  };\n\n  return new _Promise(function (resolve) {\n    // 1. 通过file获取到imageData;\n    var fileReader = new FileReader();\n    fileReader.readAsDataURL(file);\n\n    fileReader.onload = function () {\n      compressImageAtPath(this.result, option.quality, function (imageData) {\n        resolve(imageData);\n      });\n    };\n  });\n};\n\nexport { isWX, isIOS, isAndroid, isWindows, isBlackBerry, parseDate, compressImage };",{"version":3,"sources":["F:\\xiaoyuanfuwu\\app\\xiaoyuanfuwu\\src\\components\\tools\\index.js"],"names":["Date","prototype","format","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","S","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","length","k","ua","navigator","userAgent","toLowerCase","window","global","isWX","isIOS","isAndroid","isWindows","isBlackBerry","parseDate","date","fmt","compressImage","file","option","quality","maxWidth","compressImageAtPath","path","callback","img","Image","src","onload","that","w","width","h","height","scale","maxHeight","canvas","document","createElement","ctx","getContext","anw","createAttribute","nodeValue","anh","setAttributeNode","drawImage","base64","toDataURL","resolve","fileReader","FileReader","readAsDataURL","result","imageData"],"mappings":"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","sourcesContent":["// ================================= JS扩展 ================================= //\n/// 日期格式化\nDate.prototype.format = function(format) {\n  var o = {\n    'M+': this.getMonth() + 1, //month\n    'd+': this.getDate(), //day\n    'h+': this.getHours(), //hour\n    'm+': this.getMinutes(), //minute\n    's+': this.getSeconds(), //second\n    'q+': Math.floor((this.getMonth() + 3) / 3), //quarter\n    S: this.getMilliseconds() //millisecond\n  };\n  if (/(y+)/.test(format))\n    format = format.replace(\n      RegExp.$1,\n      (this.getFullYear() + '').substr(4 - RegExp.$1.length)\n    );\n\n  for (var k in o)\n    if (new RegExp('(' + k + ')').test(format))\n      format = format.replace(\n        RegExp.$1,\n        RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length)\n      );\n\n  return format;\n};\n\n/// 判断OS体统\nconst ua =\n  navigator.userAgent.toLowerCase() || window.navigator.userAgent.toLowerCase();\nglobal.isWX = () => /MicroMessenger/i.test(ua); //微信端\nglobal.isIOS = () => /(iPhone|iPad|iPod|iOS)/i.test(ua); //苹果家族\nglobal.isAndroid = () => /(android|nexus)/i.test(ua); //安卓家族\nglobal.isWindows = () => /(Windows Phone|windows[\\s+]phone)/i.test(ua); //微软家族\nglobal.isBlackBerry = () => /BlackBerry/i.test(ua); //黑莓家族\n\nconst isWX = /MicroMessenger/i.test(ua); //微信端\nconst isIOS = /(iPhone|iPad|iPod|iOS)/i.test(ua); //苹果家族\nconst isAndroid = /(android|nexus)/i.test(ua); //安卓家族\nconst isWindows = /(Windows Phone|windows[\\s+]phone)/i.test(ua); //微软家族\nconst isBlackBerry = /BlackBerry/i.test(ua); //黑莓家族\n\nconst parseDate = (date, fmt = 'yyyy-MM-dd') => {\n  if (date && date.length > 0) {\n    if (date !== '0001-01-01T00:00:00') {\n      return new Date(date).format(fmt);\n    }\n    return '';\n  }\n  return '';\n};\n\n//压缩图片\n/// 压缩图片\nconst compressImage = (file, option = { quality: 0.5, maxWidth: 320 }) => {\n  if (!file) return '';\n\n  const compressImageAtPath = (path, quality = 0.5, callback) => {\n    var img = new Image();\n    img.src = path;\n    img.onload = function() {\n      let that = this;\n      // 默认按比例压缩\n      let w = that.width,\n        h = that.height,\n        scale = w / h;\n      w = option.maxWidth || w;\n      h = option.maxHeight || w / scale;\n      // var quality = 0.7;  // 默认图片质量为0.7\n\n      //生成canvas\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n\n      // 创建属性节点\n      let anw = document.createAttribute('width');\n      anw.nodeValue = w;\n      let anh = document.createAttribute('height');\n      anh.nodeValue = h;\n      canvas.setAttributeNode(anw);\n      canvas.setAttributeNode(anh);\n\n      // 绘制图片\n      ctx.drawImage(that, 0, 0, w, h);\n\n      // 图像质量\n      // if(obj.quality && obj.quality <= 1 && obj.quality > 0){\n      //     quality = obj.quality;\n      // }\n      // quality值越小，所绘制出的图像越模糊\n      const base64 = canvas.toDataURL('image/jpeg', quality);\n\n      // console.log('current image => ', base64.length);\n\n      callback(base64);\n    };\n  };\n\n  return new Promise(resolve => {\n    // 1. 通过file获取到imageData;\n    let fileReader = new FileReader();\n    fileReader.readAsDataURL(file);\n    fileReader.onload = function() {\n      compressImageAtPath(this.result, option.quality, function(imageData) {\n        resolve(imageData);\n      });\n    };\n  });\n};\n\nexport {\n  isWX,\n  isIOS,\n  isAndroid,\n  isWindows,\n  isBlackBerry,\n  parseDate,\n  compressImage\n};\n"]}]}